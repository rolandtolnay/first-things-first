---
phase: 02-layout-calendar-grid
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/calendar/WeekView.tsx
  - src/components/calendar/DayColumn.tsx
  - src/components/calendar/TimeGrid.tsx
  - src/components/calendar/TimeSlot.tsx
  - src/lib/utils.ts
autonomous: true

must_haves:
  truths:
    - "User sees all 7 days of the week in a horizontal row"
    - "Each day shows time slots from 8:00 to 20:00"
    - "Time slots are displayed at 30-minute intervals (24 slots per day)"
    - "Time labels appear on the left side of each day column"
  artifacts:
    - path: "src/components/calendar/WeekView.tsx"
      provides: "7-day week container with day columns"
      min_lines: 30
      exports: ["WeekView"]
    - path: "src/components/calendar/DayColumn.tsx"
      provides: "Single day column structure"
      min_lines: 40
      exports: ["DayColumn"]
    - path: "src/components/calendar/TimeGrid.tsx"
      provides: "Time slot grid for 8:00-20:00"
      min_lines: 30
      exports: ["TimeGrid"]
    - path: "src/components/calendar/TimeSlot.tsx"
      provides: "Individual 30-minute time slot"
      min_lines: 15
      exports: ["TimeSlot"]
  key_links:
    - from: "WeekView.tsx"
      to: "DayColumn"
      via: "renders 7 DayColumn components"
      pattern: "map.*DayColumn"
    - from: "DayColumn.tsx"
      to: "TimeGrid"
      via: "renders TimeGrid in day"
      pattern: "<TimeGrid"
    - from: "TimeGrid.tsx"
      to: "TimeSlot"
      via: "renders 24 TimeSlot components"
      pattern: "map.*TimeSlot"
---

<objective>
Build the calendar grid structure with 7-day week view and time slots.

Purpose: Create the core calendar visualization showing all 7 days with 30-minute time slots from 8:00-20:00. This is the main interaction surface for scheduling.

Output: WeekView, DayColumn, TimeGrid, and TimeSlot components forming the calendar backbone.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context (data types)
@.planning/phases/01-foundation-data-layer/01-02-SUMMARY.md

# Source files to understand
@src/types/index.ts
@src/lib/utils.ts
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TimeSlot component</name>
  <files>src/components/calendar/TimeSlot.tsx</files>
  <action>
    Create the atomic time slot component (30-minute cell):

    1. Create `src/components/calendar/` directory
    2. Create TimeSlot.tsx as a client component (will be droppable later)
    3. Props: `slotIndex: TimeSlotIndex`, `dayIndex: DayOfWeek`
    4. Height should be consistent - use `h-8` (32px) for compact grid
    5. Show subtle border at bottom for visual separation
    6. Alternate hour backgrounds slightly for readability: even hours slightly different
    7. This is a drop target placeholder - no interactivity yet

    Structure:
    ```tsx
    interface TimeSlotProps {
      slotIndex: TimeSlotIndex;
      dayIndex: DayOfWeek;
    }

    export function TimeSlot({ slotIndex, dayIndex }: TimeSlotProps) {
      const isHourStart = slotIndex % 2 === 0;

      return (
        <div
          className={cn(
            "h-8 border-b border-border relative",
            isHourStart ? "bg-background" : "bg-muted/30"
          )}
          data-slot={slotIndex}
          data-day={dayIndex}
        >
          {/* Time blocks will render here in Phase 5 */}
        </div>
      );
    }
    ```

    Import TimeSlotIndex and DayOfWeek from types. Add cn utility if not present (simple classnames merge).
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>TimeSlot component exists with proper height and visual distinction</done>
</task>

<task type="auto">
  <name>Task 2: Create TimeGrid component</name>
  <files>src/components/calendar/TimeGrid.tsx</files>
  <action>
    Create the time grid showing 8:00-20:00 with time labels:

    1. Generate 24 time slots (0-23) representing 8:00-19:30
    2. Show time labels on the left for hour boundaries (8:00, 9:00, etc.)
    3. Use CSS Grid: time label column (narrow) + slot column (fills remaining)
    4. Time labels only appear at hour boundaries (even slot indices)
    5. Props: `dayIndex: DayOfWeek`

    Structure:
    ```tsx
    interface TimeGridProps {
      dayIndex: DayOfWeek;
    }

    export function TimeGrid({ dayIndex }: TimeGridProps) {
      const slots = Array.from({ length: 24 }, (_, i) => i as TimeSlotIndex);

      return (
        <div className="relative">
          {slots.map((slotIndex) => {
            const isHourStart = slotIndex % 2 === 0;
            const hour = 8 + Math.floor(slotIndex / 2);

            return (
              <div key={slotIndex} className="grid grid-cols-[3rem_1fr]">
                <div className="h-8 flex items-start justify-end pr-2 text-xs text-muted-foreground">
                  {isHourStart && `${hour}:00`}
                </div>
                <TimeSlot slotIndex={slotIndex} dayIndex={dayIndex} />
              </div>
            );
          })}
        </div>
      );
    }
    ```

    Use formatTime helper from utils if available, or inline the format.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>TimeGrid renders 24 slots with time labels at hour boundaries</done>
</task>

<task type="auto">
  <name>Task 3: Create DayColumn component</name>
  <files>src/components/calendar/DayColumn.tsx</files>
  <action>
    Create the day column that holds all sections for one day:

    1. Props: `dayIndex: DayOfWeek`, `date: Date`
    2. Header showing day name (Mon, Tue, etc.) and date (Jan 20)
    3. Placeholder for DayPriorities section (will be added in 02-03)
    4. TimeGrid component for the time slots
    5. Placeholder for EveningSlot (will be added in 02-03)
    6. Use flex column layout with sections

    Structure:
    ```tsx
    interface DayColumnProps {
      dayIndex: DayOfWeek;
      date: Date;
    }

    export function DayColumn({ dayIndex, date }: DayColumnProps) {
      const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      const dayName = dayNames[dayIndex];
      const dateStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
      const isToday = isSameDay(date, new Date());

      return (
        <div className="flex flex-col border-r border-border last:border-r-0">
          {/* Day header */}
          <div className={cn(
            "p-2 text-center border-b border-border sticky top-0 bg-background z-10",
            isToday && "bg-primary/10"
          )}>
            <div className="text-sm font-medium">{dayName}</div>
            <div className={cn(
              "text-xs",
              isToday ? "text-primary font-semibold" : "text-muted-foreground"
            )}>{dateStr}</div>
          </div>

          {/* Day Priorities placeholder - added in 02-03 */}
          <div className="p-2 border-b border-border min-h-[60px] bg-muted/20">
            <span className="text-xs text-muted-foreground">Priorities</span>
          </div>

          {/* Time grid */}
          <div className="flex-1">
            <TimeGrid dayIndex={dayIndex} />
          </div>

          {/* Evening slot placeholder - added in 02-03 */}
          <div className="p-2 border-t border-border min-h-[40px] bg-muted/20">
            <span className="text-xs text-muted-foreground">Evening</span>
          </div>
        </div>
      );
    }
    ```

    Add `isSameDay` helper to utils if not present (compare year/month/day).
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>DayColumn renders with header, time grid, and placeholder sections</done>
</task>

<task type="auto">
  <name>Task 4: Create WeekView component and add date utilities</name>
  <files>src/components/calendar/WeekView.tsx, src/lib/utils.ts</files>
  <action>
    Create the week container and add necessary date utilities:

    **In src/lib/utils.ts, add:**
    1. `isSameDay(date1: Date, date2: Date): boolean` - compare dates ignoring time
    2. `getWeekDates(weekId: WeekId): Date[]` - get array of 7 dates for a week
    3. `cn(...classes)` - classnames utility if not present (use clsx pattern)

    **In WeekView.tsx:**
    1. Props: `weekId: WeekId` (uses current week from store as default)
    2. CSS Grid with 7 equal columns: `grid-cols-7`
    3. Map over week dates to render 7 DayColumn components
    4. Week header with week range display (optional, can add in polish phase)
    5. Scroll container for the columns

    Structure:
    ```tsx
    interface WeekViewProps {
      weekId?: WeekId;
    }

    export function WeekView({ weekId }: WeekViewProps) {
      // Use provided weekId or get current week
      const currentWeekId = weekId ?? getCurrentWeekId();
      const dates = getWeekDates(currentWeekId);

      return (
        <div className="h-full flex flex-col">
          {/* Optional: Week header with date range */}
          <div className="p-4 border-b border-border">
            <h2 className="text-lg font-semibold">
              Week of {dates[0].toLocaleDateString('en-US', { month: 'long', day: 'numeric' })}
            </h2>
          </div>

          {/* Day columns */}
          <div className="flex-1 overflow-auto">
            <div className="grid grid-cols-7 min-w-[1000px] h-full">
              {dates.map((date, index) => (
                <DayColumn
                  key={index}
                  dayIndex={index as DayOfWeek}
                  date={date}
                />
              ))}
            </div>
          </div>
        </div>
      );
    }
    ```

    Use getCurrentWeekId from existing utils. Import DayOfWeek from types.
  </action>
  <verify>
    1. TypeScript compiles: `npx tsc --noEmit`
    2. Build succeeds: `npm run build`
  </verify>
  <done>WeekView renders 7 day columns with proper dates and all time slots</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes
- [ ] `npm run build` succeeds
- [ ] All calendar components export correctly
- [ ] WeekView shows 7 days Ã— 24 time slots structure
</verification>

<success_criteria>
- All tasks completed
- TimeSlot renders at consistent 32px height
- TimeGrid shows 24 slots with hour labels
- DayColumn has header with day/date and contains time grid
- WeekView renders 7 day columns in a grid
- No TypeScript or build errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-layout-calendar-grid/02-02-SUMMARY.md`
</output>
