---
phase: 02-layout-calendar-grid
plan: 03
type: execute
wave: 2
depends_on: ["02-01", "02-02"]
files_modified:
  - src/components/calendar/DayPriorities.tsx
  - src/components/calendar/EveningSlot.tsx
  - src/components/calendar/DayColumn.tsx
  - src/app/page.tsx
autonomous: true

must_haves:
  truths:
    - "User sees Day Priorities section at top of each day column"
    - "User sees Evening slot below the time grid in each day"
    - "User sees complete integrated layout with sidebar and calendar"
    - "Calendar scrolls independently from sidebar"
  artifacts:
    - path: "src/components/calendar/DayPriorities.tsx"
      provides: "Day priorities drop zone section"
      min_lines: 20
      exports: ["DayPriorities"]
    - path: "src/components/calendar/EveningSlot.tsx"
      provides: "Evening slot section below time grid"
      min_lines: 20
      exports: ["EveningSlot"]
  key_links:
    - from: "DayColumn.tsx"
      to: "DayPriorities"
      via: "renders DayPriorities at top"
      pattern: "<DayPriorities"
    - from: "DayColumn.tsx"
      to: "EveningSlot"
      via: "renders EveningSlot at bottom"
      pattern: "<EveningSlot"
    - from: "src/app/page.tsx"
      to: "WeekView"
      via: "renders WeekView inside MainLayout"
      pattern: "<WeekView"
---

<objective>
Complete the day sections and integrate all components into the final layout.

Purpose: Add the DayPriorities and EveningSlot sections, then wire everything together so the app displays the full calendar layout with sidebar.

Output: DayPriorities component, EveningSlot component, updated DayColumn with all sections, fully integrated app page.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plan context (need to know what was built)
@.planning/phases/02-layout-calendar-grid/02-01-PLAN.md
@.planning/phases/02-layout-calendar-grid/02-02-PLAN.md

# Source files that will be created/exist after 02-01, 02-02
# (Read these at execution time to see actual implementation)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DayPriorities component</name>
  <files>src/components/calendar/DayPriorities.tsx</files>
  <action>
    Create the Day Priorities section that appears at the top of each day:

    1. Props: `dayIndex: DayOfWeek`
    2. This is a free-form section for prioritized goals (not time-bound)
    3. Will be a drop zone in Phase 5 - for now, show empty state
    4. Minimum height to maintain consistent layout even when empty
    5. Visual distinction from time grid (slightly different background)

    Structure:
    ```tsx
    interface DayPrioritiesProps {
      dayIndex: DayOfWeek;
    }

    export function DayPriorities({ dayIndex }: DayPrioritiesProps) {
      // TODO: Get priorities from store in Phase 5
      const priorities: DayPriority[] = [];

      return (
        <div
          className="min-h-[80px] p-2 border-b border-border bg-muted/10"
          data-day={dayIndex}
          data-section="priorities"
        >
          {priorities.length === 0 ? (
            <div className="h-full flex items-center justify-center">
              <span className="text-xs text-muted-foreground italic">
                Drop goals here
              </span>
            </div>
          ) : (
            <div className="space-y-1">
              {/* Priority items will render here */}
            </div>
          )}
        </div>
      );
    }
    ```

    Import DayOfWeek and DayPriority from types. The empty state text guides users even before drag-drop is implemented.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>DayPriorities component renders with empty state and proper sizing</done>
</task>

<task type="auto">
  <name>Task 2: Create EveningSlot component</name>
  <files>src/components/calendar/EveningSlot.tsx</files>
  <action>
    Create the Evening slot section that appears below the time grid:

    1. Props: `dayIndex: DayOfWeek`
    2. Single slot for evening activities (after 8:00 PM)
    3. Can hold one goal or freestyle block (Phase 5+)
    4. Fixed height, visually distinct from time grid
    5. Data attributes for future drop target

    Structure:
    ```tsx
    interface EveningSlotProps {
      dayIndex: DayOfWeek;
    }

    export function EveningSlot({ dayIndex }: EveningSlotProps) {
      // TODO: Get evening block from store in Phase 5
      const eveningBlock = null;

      return (
        <div
          className="min-h-[48px] p-2 border-t border-border bg-muted/10"
          data-day={dayIndex}
          data-section="evening"
        >
          {!eveningBlock ? (
            <div className="h-full flex items-center justify-center">
              <span className="text-xs text-muted-foreground italic">
                Evening
              </span>
            </div>
          ) : (
            <div>
              {/* Evening block will render here */}
            </div>
          )}
        </div>
      );
    }
    ```

    Import DayOfWeek from types. Keep it simple - this is a single-item container.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>EveningSlot component renders with empty state</done>
</task>

<task type="auto">
  <name>Task 3: Update DayColumn to use real components</name>
  <files>src/components/calendar/DayColumn.tsx</files>
  <action>
    Replace the placeholder sections in DayColumn with actual components:

    1. Import DayPriorities and EveningSlot
    2. Replace the placeholder priority div with `<DayPriorities dayIndex={dayIndex} />`
    3. Replace the placeholder evening div with `<EveningSlot dayIndex={dayIndex} />`
    4. Ensure proper ordering: header → priorities → time grid → evening
    5. Keep the sticky header behavior

    The updated structure should be:
    ```tsx
    <div className="flex flex-col border-r border-border last:border-r-0 min-w-[140px]">
      {/* Day header - sticky */}
      <div className={cn(...)}>
        ...
      </div>

      {/* Day Priorities section */}
      <DayPriorities dayIndex={dayIndex} />

      {/* Time grid */}
      <div className="flex-1">
        <TimeGrid dayIndex={dayIndex} />
      </div>

      {/* Evening slot */}
      <EveningSlot dayIndex={dayIndex} />
    </div>
    ```

    Add `min-w-[140px]` to ensure columns don't collapse too small.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>DayColumn renders with DayPriorities, TimeGrid, and EveningSlot</done>
</task>

<task type="auto">
  <name>Task 4: Wire WeekView into app page</name>
  <files>src/app/page.tsx</files>
  <action>
    Update the home page to render the complete calendar layout:

    1. Import WeekView component
    2. Replace the placeholder calendar content with `<WeekView />`
    3. Ensure WeekView fills the available space

    Final structure:
    ```tsx
    import { MainLayout } from "@/components/layout/MainLayout";
    import { Sidebar } from "@/components/sidebar/Sidebar";
    import { WeekView } from "@/components/calendar/WeekView";

    export default function Home() {
      return (
        <MainLayout sidebar={<Sidebar />}>
          <WeekView />
        </MainLayout>
      );
    }
    ```

    The page should now display:
    - Sidebar on left (~25%) with title and theme toggle
    - Calendar on right (~75%) with 7 day columns
    - Each day with priorities, time grid (8:00-20:00), and evening slot
  </action>
  <verify>
    1. TypeScript compiles: `npx tsc --noEmit`
    2. Build succeeds: `npm run build`
    3. Dev server shows complete layout: `npm run dev` (localhost:3000)
  </verify>
  <done>App displays complete layout with sidebar and 7-day calendar grid</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes
- [ ] `npm run build` succeeds
- [ ] All components properly connected
- [ ] Layout visible at localhost:3000 showing:
  - Sidebar on left with title and theme toggle
  - Calendar on right with 7 days
  - Each day has: header, priorities section, time grid (8:00-20:00), evening slot
  - Time slots display at 30-minute intervals
</verification>

<success_criteria>
- All tasks completed
- DayPriorities shows empty state with guidance text
- EveningSlot shows empty state
- DayColumn properly integrates all sections
- WeekView renders inside MainLayout
- Complete layout matches Phase 2 success criteria:
  1. Sidebar on left (~25%) and calendar on right (~75%)
  2. All 7 days visible on 1440px+ viewport
  3. Day Priorities section at top of each day
  4. Time grid 8:00-20:00 with 30-minute intervals
  5. Evening slot below time grid
</success_criteria>

<output>
After completion, create `.planning/phases/02-layout-calendar-grid/02-03-SUMMARY.md`
</output>
